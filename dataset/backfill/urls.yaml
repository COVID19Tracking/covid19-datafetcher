# Format: State => [queries]
# Query is
# url: The URL to make the request to
# params: url params (in json format, for convenience)
# type: type of query: arcgis, json, csv, etc.
# desc: String description, used to build the links index
# data_path: path in the query result from which to get the data
#
# Only `url` and `type` are mandatory, but I fill `params` with `null` when it's empty, I think that it's nicer this way
AK:
- url: https://services1.arcgis.com/WzFsmainVTuD5KML/arcgis/rest/services/Tests_Dataset/FeatureServer/0/query
  params: {where: 1=1, orderByFields: Date_Collected asc, groupByFieldsForStatistics: 'Date_Collected,Test_Result', outStatistics: [{'statisticType': 'count', 'onStatisticField': 'FID', 'outStatisticFieldName': 'tests_total'}], f: json}
  type: arcgis
  desc: PCR tests by specimen collection
AL:
- url: https://services7.arcgis.com/4RQmZZ0yaZkGR1zy/arcgis/rest/services/HospitalizedPatientTemporal_READ_ONLY/FeatureServer/1/query
  params: {where: 1=1, outFields: '*', orderByFields: OBJECTID asc, f: json}
  type: arcgis
  desc: Current hospitalizations
CA:
- url: https://data.ca.gov/api/3/action/datastore_search_sql
  params: {sql: 'select date, sum(totalcountdeaths) as death, sum(totalcountconfirmed) as confirmed from "926fd08f-cc91-4828-af38-bd45de97f8c3" group by date order by date desc limit 200'}
  type: ckan
  data_path: ['result', 'records', []]
  desc: Cases, death
- url: https://data.ca.gov/api/3/action/datastore_search
  params: {resource_id: b6648a0d-ff0a-4111-b80b-febda2ac9e09, limit: 200, sort: date desc}
  type: ckan
  data_path: ['result', 'records', []]
  desc: Testing total
CO:
- url: https://services3.arcgis.com/66aUo8zsujfVXRIT/ArcGIS/rest/services/colorado_covid19_daily_state_statistics_cumulative/FeatureServer/0/query
  params: {where: Desc_='State Data', outFields: '*', f: json}
  type: arcgis
  desc: Cases, tested, death, hosp
- url: https://services3.arcgis.com/66aUo8zsujfVXRIT/ArcGIS/rest/services/colorado_covid19_laboratory_positivity_data/FeatureServer/0/query
  params: {where: Metric='Count of people tested by CDPHE lab' or Metric='Count of people tested by non-CDPHE (commercial) lab', outFields: '*', orderByFields: Attr_Date asc, groupByFieldsForStatistics: Attr_Date, outStatistics: [{"statisticType": "sum", "onStatisticField": "Value", "outStatisticFieldName": "test_encounters"}], f: json}
  type: arcgis
  desc: Test encounters
MA:
- url: https://www.mass.gov/info-details/covid-19-response-reporting
  params: null
  type: html:soup
  desc: None, just need a trigger
MD:
- url: https://services.arcgis.com/njFNhDsUCentVYJW/ArcGIS/rest/services/MASTERCaseTracker/FeatureServer/0/query
  params: {f: json, resultRecordCount: 300, orderByFields: ReportDate desc, outFields: 'ReportDate,TotalCases,NegativeTests,bedsICU,bedsAcute,bedsTotal,total_hospitalized,total_released,deaths,pdeaths,TotalTests', where: 1=1}
  type: arcgis
  # The daily cumulative total of COVID-19 tests administered in Maryland
- url: https://services.arcgis.com/njFNhDsUCentVYJW/arcgis/rest/services/MDCOVID19_TestingVolume/FeatureServer/0/query
  params: {where: 1=1, outFields: 'date,number_of_tests,number_of_positives', orderByFields: Date asc, f: json}
  type: arcgis
  desc: PCR Testing and positives
MO:
- url: https://services6.arcgis.com/Bd4MACzvEukoZ9mR/arcgis/rest/services/PCR_Test_by_Date_Automated/FeatureServer/0/query
  params: {where: test_date2>timestamp '2020-01-16 06:59:59', outFields: 'test_date2 as pcr_test_encouter_date, Negative as pcr_negative, Positive as pcr_positive, Total as pcr_total', orderByFields: test_date2 asc, f: json}
  type: arcgis
  desc: PCR testing (total, pos, neg), by test encounter
- url: https://services6.arcgis.com/Bd4MACzvEukoZ9mR/arcgis/rest/services/Cases_by_Reported_Date_Automated/FeatureServer/0/query
  params: {where: Date>timestamp '2020-02-1 00:00:00', outFields: '*', orderByFields: Date asc, f: json}
  type: arcgis
  desc: Cases by report date
MT:
- url: https://services.arcgis.com/qnjIrwR8z5Izc0ij/ArcGIS/rest/services/COVID_Cases_Production_View/FeatureServer/1/query
  params: {where: 1=1, outFields: '*', orderByFields: ScriptRunDate asc, f: json}
  type: arcgis
  desc: Total tested
RI:
- url: 'https://docs.google.com/spreadsheets/d/1c2QrNMz8pIbYEKzMJL7Uh2dtThOJa2j1sSMwiDo5Gz4/export?format=csv&gid=1592746937'
  params: {parse_dates: True}
  type: pandas
TN:
- url: https://services1.arcgis.com/HLC8bAygObK4fhPW/arcgis/rest/services/TN_COVID19_Daily/FeatureServer/0/query
  params: {where: 1=1, outFields: '*', orderByFields: 'DATE desc', resultRecordCount: 300, f: json}
  type: arcgis
  desc: Main data
TX:
- url: https://services5.arcgis.com/ACaLB9ifngzawspq/arcgis/rest/services/DSHS_COVID19_Cases_Service/FeatureServer/8/query
  params: {where: 1=1, outFields: '*', orderByField: Date asc, resultRecordCount: 500, f: json}
  type: arcgis
  desc: Cases and deaths
- url: https://services5.arcgis.com/ACaLB9ifngzawspq/arcgis/rest/services/DSHS_COVID19_TestData_Service/FeatureServer/1/query
  params: {where: 1=1, outFields: '*', orderByField: Date asc, resultRecordCount: 500, f: json}
  type: arcgis
  desc: Curr. hospitalization
- url: https://services5.arcgis.com/ACaLB9ifngzawspq/arcgis/rest/services/DSHS_COVID19_TestData_Service/FeatureServer/3/query
  params: {where: 1=1, outFields: '*', orderByField: Date asc, resultRecordCount: 500, f: json}
  type: arcgis
  desc: Testing (PCR + Antibody)
